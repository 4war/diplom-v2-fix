<div class="text-white">
  {{general.currentFactory | json}}
</div>

<div class="row">
  <mat-card class="color-dark col-md-12 my-4">
    <mat-card-header>Сетка</mat-card-header>
    <mat-card-content>
      <drag-scroll [scrollbar-hidden]="true" class="net">
        <ngtt-single-elimination-tree
          [tournament]="singleTournamentViewModel"
          [matchTemplate]="myMatchTemplate">
        </ngtt-single-elimination-tree>
      </drag-scroll>
    </mat-card-content>
  </mat-card>

  <div class="col-md-12 px-0 my-4">
    <mat-card class="color-dark">
      <mat-card-header>Список участников</mat-card-header>
      <mat-card-content>
        <table mat-table [dataSource]="players" class="custom-table">
          <!-- RNI Column -->
          <ng-container matColumnDef="RNI">
            <th mat-header-cell *matHeaderCellDef>РНИ</th>
            <td mat-cell *matCellDef="let element">{{element.rni}}</td>
          </ng-container>

          <!-- Number Column -->
          <ng-container matColumnDef="Index">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let i = index" class="index">{{i + 1}}</td>
          </ng-container>

          <!-- Point Column -->
          <ng-container matColumnDef="Points">
            <th mat-header-cell *matHeaderCellDef>Рейтинг</th>
            <td mat-cell *matCellDef="let element">{{element.point}}</td>
          </ng-container>

          <!-- FIO Column -->
          <ng-container matColumnDef="FIO">
            <th mat-header-cell *matHeaderCellDef>ФИО</th>
            <td mat-cell *matCellDef="let element">{{element.surname}}
              {{element.name == null && element.name.length > 0 ? '' : element.name[0] + '.'}}
              {{element.patronymic == null && element.patronymic.length > 0 ? '' : element.patronymic[0] + '.'}}</td>
          </ng-container>

          <!-- DoB Column -->
          <ng-container matColumnDef="DoB">
            <th mat-header-cell *matHeaderCellDef>Дата рождения</th>
            <td mat-cell *matCellDef="let element">{{element.dateOfBirth | date: 'dd.MM.YYYY'}}</td>
          </ng-container>

          <!-- City Column -->
          <ng-container matColumnDef="City">
            <th mat-header-cell *matHeaderCellDef>Город</th>
            <td mat-cell *matCellDef="let element">{{element.city}}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr style="vertical-align: middle"
              mat-row
              *matRowDef="let row; columns: displayedColumns;"
              (click)="redirectToPlayer(row.rni)"
          ></tr>
        </table>
        <div class="add-button">
          <a mat-button color="accent" routerLink="../post" >Добавить участника</a>
        </div>

      </mat-card-content>
    </mat-card>
  </div>
</div>


<ng-template #myMatchTemplate let-match>
  <app-single-match-preview [match]="match"
                            style="display: flex; justify-content: stretch; width: 100%">
  </app-single-match-preview>
</ng-template>

